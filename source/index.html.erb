<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Verlichting</title>

  <% material_css = is_production ? fingerprinted_file("source/stylesheets/material.indigo-pink.min.css") : 'material.indigo-pink.min.css' %>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="/stylesheets/<%= material_css %>">

  <% all = is_production ? fingerprinted_file("source/stylesheets/all.css") : 'all.css' %>
  <link href="/stylesheets/<%= all %>" rel="stylesheet" type="text/css" />

  <% my_zwave = is_production ? fingerprinted_file("tmp/javascripts/my_zwave.min.js") : 'my_zwave.js' %>
  <%# Inline the material script since it's not possible to set an SRI hash - getmdl.io doesn't set the correct CORS header %>
  <% material_js = is_production ? fingerprinted_file("tmp/javascripts/material.min.js") : 'material.min.js' %>

  <script defer src="/javascripts/<%= material_js %>"></script>
  <script src="/javascripts/vue.js" type="text/javascript"></script>
</head>
<body role="document" class="index">

<div id="app">
  <div class="mdl-snackbar mdl-js-snackbar js-snackbar">
    <div class="mdl-snackbar__text"></div>
    <button class="mdl-snackbar__action"></button>
  </div>

  <div class="mdl-grid">
    <programme-buttons-list
      v-bind:programmes="programmes"
      v-bind:active-programme-id="activeProgrammeId"
      v-on:programme-requested="programmeRequested"></programme-buttons-list>

    <vacation-mode v-bind:state="vacationModeState"
                   v-on:start="vacationModeStartRequested"
                   v-on:stop="vacationModeStopRequested"></vacation-mode>
    <lights-list v-on:reload-requested="reloadLights" v-bind:lights="lights"></lights-list>

    <div class="mdl-card mdl-shadow--2dp mdl-cell--12-col">
      <div class="mdl-card__title">
        <h3 class="mdl-card__title-text">Latest events</h3>
      </div>
      <div class="js-latest-events mdl-card__supporting-text">
      </div>
    </div>
  </div>
</div>

<div id="login-dialog"></div>

<!-- Light value dialog -->
<dialog class="mdl-dialog light-value-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="mdl-dialog__title js-light-dialog-title">Brightness</div>
  <div class="mdl-dialog__content">
    <div class="mdl-textfield mdl-js-textfield js-slider-container">
    </div>
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button mdl-js-button submit">Close</button>
    <button type="button" class="mdl-button mdl-js-button cancel">Cancel</button>
  </div>
</dialog>

<!-- Light switch dialog -->
<dialog class="mdl-dialog light-switch-dialog" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="mdl-dialog__title js-light-dialog-title">Brightness</div>
  <div class="mdl-dialog__content">
    <div class="mdl-textfield mdl-js-textfield js-switch-container">
    </div>
  </div>
  <div class="mdl-dialog__actions">
    <button type="button" class="mdl-button mdl-js-button submit">Close</button>
    <button type="button" class="mdl-button mdl-js-button cancel">Cancel</button>
  </div>
</dialog>
</body>

<script src="/javascripts/<%= my_zwave %>" type="text/javascript"></script>

</html>
